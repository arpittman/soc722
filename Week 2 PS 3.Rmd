---
title: "Week 2 PS 3"
author: "Amelia Pittman (AP)"
output:
  html_document:
    df_print: paged
---
First I'll load some packages and take a look at the data.

```{r}
library(ggplot2)
library(dplyr)
data(txhousing)
glimpse(txhousing)
```

## Question 1
Wichita Falls is the last city in the dataset (I found this out by clicking on the dataset in the environment and scrolling to the bottom.)

## Question 2
The "listings" variable represents the total active housing listings in the given city at the given time.

Now I'm going to write some code to explore the data wrangling functions in dplyr.
```{r}
txhousing %>% select(sales, volume)
txhousing <- txhousing %>% select(-date)
austin_12 <- txhousing %>% filter(year==2012, city=="Austin")
txhousing %>% filter(year<2004, city=="Austin")
aust_ab <- txhousing %>% filter(city=="Austin" | city=="Abilene")
txhousing <- txhousing %>%
  mutate(vol_100k = volume/100000)
austin_12 %>% summarize(x_bar_sales = mean(sales))
austin_12 %>% summarize(x_bar_sales = mean(sales), 
                        sd_sales = sd(sales), 
                        min_vol = min(volume), 
                        max_vol = max(volume), 
                        mdn_list = median(listings), 
                        iqr_list = IQR(listings),
                        sample_size = n())
austin_12 %>%
  arrange(desc(volume))
aust_ab %>% group_by(city) %>% 
  summarize(x_bar_sales = mean(sales))
aust_ab %>% group_by(city, month) %>% 
  summarize(x_bar_sales = mean(sales))
```
That was a lot! Now I'll get into the problem set.

## Question 3
```{r}
txhousing <- txhousing |> select(-inventory)
```
It worked! TXHOUSING no longer has the INVENTORY variable in the data viewer.

## Question 4
```{r}
dallas_sub <- txhousing |> filter(city=="Dallas", year==2012 | year==2013)
```
Note to self: commas separate filtering between different variables; the "or" operator (|) allows for multiple values to be included from one variable.

## Question 5
```{r}
dallas_sub <- dallas_sub |> mutate(prct_sold = (sales/listings*100))
```
Note to self: the new data frame will REPLACE the old one.

## Question 6
```{r}
dallas_summary <- dallas_sub |> group_by(month) |> summarize(meanprctsold = mean(prct_sold))
```
Note to self: First, group by the "per" variable, then summarize the variable of interest.

## Question 7
```{r}
dallas_summary |> arrange(desc(meanprctsold))
```
August had the greatest average percent sold.

## Question 8
```{r}
txhousing %>% 
  filter(year == 2012 | year == 2013, city == "Dallas") %>%
  mutate(prct_sold = sales/listings *100) %>%
  group_by(month) %>%
  summarize(mean_prct_sold = mean(prct_sold)) %>% 
  arrange(desc(mean_prct_sold))
```
This code chunk did the exact same thing that I did in questions 3-7, but using more pipes so that instead of 5 chunks, it's one. First, filtered to include data from Dallas in 2012 and 2013, creating a percent sold variable, finding the average percent sold per month, and arranging high to low.

## Question 9
```{r}
txhousing |> 
  filter(month==1, year==2015) |> 
  arrange(listings)
```
First, I filtered to only include January 2015, then I arranged by number of listings. San Marcos had the fewest listings in January 2015.

## Question 10
```{r}
txhousing |>
  filter(year==2012) |> 
  group_by(month) |> 
  summarize(totalsales=sum(sales)) |> 
  arrange(desc(totalsales))
  
```
First, filter to only include 2012. Then, group by month and find the sum of all the sales. Finally, arrange in descending order and find that August is the month that the most houses were sold in Texas in 2012.

## Question 11
```{r}
txhousing |> 
  filter(year==2000|year==2001, city=="Dallas"|city=="Austin") |> 
  group_by(city) |> 
  summarize(totalsales=sum(sales))
```
First, keep only the data from 2000 and 2001 in Dallas and Austin. Then, group by city and summarize the sum of the sales. If I wanted to separate out 2000 and 2001, I could group by city AND year.
